namespace = CIML

character_event = {
	id = CIML.301
	title = EVTNAMECIML.301
	desc = EVTDESCCIML.301

	picture = GFX_evt_secluded_in_prayer
	
	is_triggered_only = yes

	option = {
		name = EVTOPTACIML.301
		trigger = {
			NOT = { trait = cynical }
			NOT = { has_secret_religion = yes }
			NOT = {society_is_devil_worshiper = yes }
		}
		piety = 30
		if = { 
			limit = { 
				NOT = { trait = is_fat }
				NOT = { trait = is_malnourished } 
			} 
			random = { 
				chance = 10 
				add_trait = is_malnourished
			}
		}
		if = { 
			limit = { 
				trait = is_fat
			} 
			random = { 
				chance = 30 
				remove_trait = is_fat
			}
		} 
	}

	option = {
		name = EVTOPTBCIML.301
		trigger = {
			NOT = { has_secret_religion = yes }
		}
		piety = 10
		if = { 
			limit = { 
				NOT = { trait = is_fat } 
				NOT = { trait = is_malnourished }
			} 
			random = { 
				chance = 2 
				add_trait = is_malnourished
			}
		}
		if = { 
			limit = { 
				trait = is_fat
			} 
			random = { 
				chance = 8 
				remove_trait = is_fat
			}
		}
	}

	option = {
		name = EVTOPTCCIML.301
		tooltip_info = intrigue
		trigger = {
			NOT = { has_secret_religion = yes }
			intrigue = 8
		}
		piety = -30
		prestige = 45
	}

	option = {
		name = EVTOPTDCIML.301
		trigger = {
			OR = {
				has_secret_religion = yes
				society_is_devil_worshiper = yes
			}
		}
		piety = -50
	}

	after = {
	character_event = { id = CIML.302 days = 20 }
	}
}

character_event = {
	id = CIML.302
	title = EVTNAMECIML.302
	desc = EVTDESCCIML.302

	picture = GFX_evt_pope
	
	is_triggered_only = yes

	option = {
		name = EVTOPTACIML.302
		piety = 30
		if = { 
			limit = { 
				trait = stressed
			} 
			random = { 
				chance = 10 
				remove_trait = stressed
			}
		}
		if = { 
			limit = { 
				society_is_devil_worshiper = yes
			} 
			leave_society = yes
		}
		if = { 
			limit = { 
				has_secret_religion = yes
			} 
			clear_secret_religion = yes
		}
		if = { 
				any_lover = {
					limit = {						
						NOT = {
							spouse = {
								character = ROOT
							}
						}
					}
					remove_lover = PREV
				}
		}
		random = { 
				chance = 2 
				change_learning = 1
		}
		if = { 
			limit = { 
				ROOT = { is_senior_consort_party = yes } 
			} 
			any_consort = { remove_consort = ROOT }
		}
	}

	option = {
		name = EVTOPTBCIML.302
		trigger = {
			NOT = { has_secret_religion = yes }
			NOT = { trait = honest }
			NOT = { trait = zealous }
		}
		piety = -200
		random = { 
				chance = 10 
				change_intrigue = 1
		}
		if = { 
			limit = { 
				NOT = { trait = stressed }
			} 
			random = { 
				chance = 10 
				add_trait = stressed
			}
		}
	}

	option = {
		name = EVTOPTCCIML.302
		tooltip_info = paranoid
		trigger = {
			trait = paranoid
		}
		piety = -10
	}

	option = {
		name = EVTOPTDCIML.302
		trigger = {
			NOT = { trait = zealous }
		}
		piety = -20
	}

	after = {
	narrative_event = { id = CIML.303 days = 20 }
	}
}

narrative_event = {
	id = CIML.303
	title = EVTNAMECIML.303
	desc = EVTDESCCIML.303

	picture = GFX_evt_beatification
	
	is_triggered_only = yes

	option = {
		name = EVTOPTACIML.303
		trigger = {
			NOT = { has_secret_religion = yes }
			NOT = { trait = cynical }
			NOT = { society_is_devil_worshiper = yes }
		}
		piety = 10
		if = { 
			limit = { 
				trait = depressed
			} 
			random = { 
				chance = 10 
				remove_trait = depressed
			}
		}
	}

	option = {
		name = EVTOPTBCIML.303
		trigger = {
			NOT = { has_secret_religion = yes }
			NOT = { society_is_devil_worshiper = yes }
		}
		piety = 10
		wealth = -20
		prestige = 15
		if = { 
			limit = { 
				trait = depressed
			} 
			random = { 
				chance = 5 
				remove_trait = depressed
			}
		}
		if = { 
			limit = { 
				trait = is_malnourished
			} 
			random = { 
				chance = 10 
				remove_trait = is_malnourished
			}
		}
		
	}

	option = {
		name = EVTOPTCCIML.303
		tooltip_info = cynical
		trigger = {
			trait = cynical
		}
		piety = -30
	}

	option = {
		name = EVTOPTDCIML.303
		trigger = {
			OR = {
				has_secret_religion = yes
				society_is_devil_worshiper = yes
			}
		}
		if = { 
			limit = { 
				NOT = { trait = stressed }
			} 
			random = { 
				chance = 10 
				add_trait = stressed
			}
		}
	}

	after = {
	}
}
character_event = {
	id = can.30
	desc = EVTDESC_st_patricks_1
	picture = GFX_evt_stone_church
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = st_patricks_day
	}
	
	immediate = {
		character_event = { id = CIML.31 days = 1 }
	}
	
	option = {
		name = EVTOPTA_st_patricks_1
		piety = 30
	}
}

character_event = {
	id = CIML.31
	desc = EVTDESC_st_patricks_2
	picture = GFX_evt_jugglers
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = st_patricks_day
	}
	
	immediate = {
		character_event = { id = CIML.32 days = 1 }
	}
	
	option = {
		name = EVTOPTA_st_patricks_2
		prestige = 50
	}
}

character_event = {
	id = CIML.32
	desc = EVTDESC_st_patricks_3
	picture = GFX_evt_feast_hf
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = st_patricks_day
	}
	
	option = {
		name = EVTOPTA_st_patricks_3
		prestige = 30
		piety = -30
		custom_tooltip = { text = TXT_st_patricks_drunk }
		hidden_tooltip = {
			random_list = {
				50 = { #wake up hungover with a random negative effect
					character_event = { id = CIML.33 days = 1 }
				}
				20 = { #wake up injured from a barfight
					character_event = { id = CIML.34 days = 1 }
				}
				20 = { #wake up remembering that you were the life of the party
					character_event = { id = CIML.35 days = 1 }
				}
				10 = { #wake up in bed next to someone else...
					character_event = { id = CIML.36 days = 1 }
				}
			}
		}
		ai_chance = {
			factor = 50
			modifier = {
				trait = temperate
				factor = 0
			}
			modifier = {
				trait = zealous
				factor = 0
			}
		}
	}

	
	option = {
		name = EVTOPTB_st_patricks_3
		trigger = { NOT = { trait = drunkard } }
		prestige = -30
		piety = 30
		custom_tooltip = { text = TXT_st_patricks_end }
		hidden_tooltip = { clr_character_flag = st_patricks_day }
		hidden_tooltip = { clr_character_flag = recent_minor_decision }
		hidden_tooltip = { clr_character_flag = do_not_disturb }
		hidden_tooltip = { add_character_modifier = { name = st_patricks_timer years = 3 } }
		ai_chance = {
			factor = 50
		}
	}
}
character_event = {
	id = CIML.33
	desc = EVTDESC_st_patricks_4
	picture = GFX_evt_outside_tavern_hf
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = st_patricks_day
	}
	
	immediate = {
		clr_character_flag = st_patricks_day
		clr_character_flag = do_not_disturb
		clr_character_flag = recent_minor_decision
		add_character_modifier = { name = st_patricks_timer years = 3 }
	}
	
	option = {
		name = EVTOPTA_st_patricks_4
		trigger = { NOT = { trait = drunkard } }
		prestige = -15
		custom_tooltip = { text = TXT_st_patricks_end }
		hidden_tooltip = {
			random_list = {
				10 = {
					add_trait = drunkard
					gain_weight_small_effect = yes
				}
				30 = {
					if = {
						limit = {
							NOT = {
								has_dlc = "Reapers"
							}
						}
						add_trait = ill
					}
					if = {
						limit = {
							has_dlc = "Reapers"
						}
						add_symptom_effect = yes
					}
				}
				10 = {
					add_trait = gluttonous
					gain_weight_small_effect = yes
				}
				20 = {
					wealth = -20
				}
				30 = { }
			}
		}				
	}
	
	option = {
		name = EVTOPTB_st_patricks_4
		trigger = { trait = drunkard }
		prestige = 10
	}
}

character_event = {
	id = CIML.34
	desc = EVTDESC_st_patricks_5
	picture = GFX_evt_bad_news
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = st_patricks_day
	}
	
	immediate = {
		clr_character_flag = st_patricks_day
		clr_character_flag = do_not_disturb
		clr_character_flag = recent_minor_decision
		add_character_modifier = { name = st_patricks_timer years = 3 }
	}
	
	option = {
		name = EVTOPTA_st_patricks_5
		if = {
			limit = {
				trait = patient
			}
			remove_trait = patient
			prestige = -10
		}
		else_if = {
			limit = {
				NOT = { trait = patient }
				NOT = { trait = wroth }
			}
			add_trait = wroth
			prestige = -10
		}
		else_if = {
			limit = {
				trait = wroth
			}
			prestige = 5
		}
		random_list = {
			30 = { }
			60 = { add_trait = wounded }
			10 = { add_severely_injured_effect = yes }
		}
		custom_tooltip = { text = TXT_st_patricks_end }
	}
}

character_event = {
	id = CIML.35
	desc = EVTDESC_st_patricks_6
	picture = GFX_evt_feast_hf
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = st_patricks_day
	}
	
	immediate = {
		clr_character_flag = st_patricks_day
		clr_character_flag = do_not_disturb
		clr_character_flag = recent_minor_decision
		add_character_modifier = { name = st_patricks_timer years = 3 }
	}
	
	option = {
		name = EVTOPTA_st_patricks_6
		prestige = 30
		if = {
			limit = {
				trait = shy
			}
			remove_trait = shy
		}
		else_if = {
			limit = {
				NOT = { trait = gregarious }
			}
			add_trait = gregarious
		}
		custom_tooltip = { text = TXT_st_patricks_end }
	}
}

character_event = {
	id = CIML.36
	desc = EVTDESC_st_patricks_7
	picture = GFX_evt_lovers
	border = GFX_event_normal_frame_diplomacy
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = st_patricks_day
	}
	
	immediate = {
		clr_character_flag = st_patricks_day
		clr_character_flag = do_not_disturb
		clr_character_flag = recent_minor_decision
		add_character_modifier = { name = st_patricks_timer years = 3 }
	}
	
	option = {
		name = EVTOPTA_st_patricks_7
		trigger = {
			is_female = no
			NOT = { trait = homosexual }
		}
		piety = -10
		prestige = 10
		if = {
			limit = {
				trait = chaste
			}
			remove_trait = chaste
		}
		create_character = {
			random_traits = no
			dynasty = NONE
			religion = ROOT
			culture = ROOT
			female = yes
			age = 17
			trait = intricate_webweaver
			trait = fair
			trait = uncouth
			trait = quick
			trait = lustful
			trait = proud
			trait = gluttonous
			attributes = {
				diplomacy = 3
				intrigue = 10
			}
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			gain_weight_medium_effect = yes
			add_lover = ROOT
			remove_trait = genius
			remove_trait = imbecile
			remove_trait = ugly
			remove_trait = slow
			remove_trait = chaste
		}
		custom_tooltip = { text = TXT_st_patricks_end }
	}
	
	option = {
		name = EVTOPTB_st_patricks_7
		trigger = {
			is_female = yes
			NOT = { trait = homosexual }
		}
		piety = -10
		prestige = 10
		if = {
			limit = {
				trait = chaste
			}
			remove_trait = chaste
		}
		create_character = {
			random_traits = no
			dynasty = NONE
			religion = ROOT
			culture = ROOT
			female = no
			age = 17
			trait = intricate_webweaver
			trait = fair
			trait = uncouth
			trait = quick
			trait = lustful
			trait = proud
			trait = drunkard
			attributes = {
				diplomacy = 3
				intrigue = 10
			}
		}
		new_character = {
			character_event = { id = misc.3 } # Diversity
			gain_weight_medium_effect = yes
			add_lover = ROOT
			remove_trait = genius
			remove_trait = imbecile
			remove_trait = ugly
			remove_trait = slow
			remove_trait = chaste			
		}
		custom_tooltip = { text = TXT_st_patricks_end }
	}
}