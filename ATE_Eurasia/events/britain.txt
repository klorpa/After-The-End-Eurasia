# High Church, Glorian, and other British events
namespace = britain

character_event = {
	id = britain.1	
	desc = EVTDESC_britain_1
	picture = GFX_evt_bishop
	religion = high_church
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_alternate_start_parameter = { key = religion_names value = random }
		}
	}
	
	option = {
		name = EVTOPTA_britain_1
		hidden_tooltip = {
			remove_trait = broad_anglican
			remove_trait = low_anglican
		}
		add_trait = high_anglican
		ai_chance = {
			factor = 10
			modifier = { factor = 2	learning = 10 }
		}
	}

	option = {
		name = EVTOPTB_britain_1
		hidden_tooltip = {
			remove_trait = high_anglican
			remove_trait = low_anglican
		}
		add_trait = broad_anglican
		ai_chance = {
			factor = 10
			modifier = { factor = 2	learning = 5 }
			modifier = { factor = 2	diplomacy = 5 }
		}
	}
	
	option = {
		name = EVTOPTC_britain_1
		hidden_tooltip = {
			remove_trait = broad_anglican
			remove_trait = high_anglican
		}
		add_trait = low_anglican
		ai_chance = {
			factor = 10
			modifier = { factor = 1.5 diplomacy = 10 }
		}
	}
}

character_event = {
	id = britain.2	
	desc = EVTDESC_britain_2
	picture = GFX_evt_bishop
	religion = high_church
	is_triggered_only = yes

	trigger = {
		NOT = {
			has_alternate_start_parameter = { key = religion_names value = random }
		}
	}
	
	option = {
		name = EVTOPTA_britain_2
		hidden_tooltip = {
			remove_trait = quaker
			remove_trait = baptist
		}
		add_trait = methodist
		ai_chance = {
			factor = 10
			modifier = { factor = 2	learning = 10 }
		}
	}

	option = {
		name = EVTOPTB_britain_2
		hidden_tooltip = {
			remove_trait = methodist
			remove_trait = baptist
		}
		add_trait = quaker
		ai_chance = {
			factor = 10
			modifier = { factor = 1.5 diplomacy = 10 }
		}
	}
	
	option = {
		name = EVTOPTC_britain_2
		hidden_tooltip = {
			remove_trait = quaker
			remove_trait = methodist
		}
		add_trait = baptist
		ai_chance = {
			factor = 10
			modifier = { factor = 2	learning = 5 }
			modifier = { factor = 2	diplomacy = 5 }
		}
	}
}

narrative_event = {
	id = britain.100
	title = EVTNAME_britain_100
	desc =  EVTDESC_britain_100
	picture = GFX_uk_restored
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				ai = no
			}
			set_character_flag = achievement_legacy_of_albion
		}
	}
	
	option = {
		name = EVTOPTA_britain_100
		add_trait = fount_of_honour
		give_nickname = nick_gloriana
		 custom_tooltip = { text = tooltip_forge_windsor_crown }
			 hidden_tooltip = {
				 add_artifact = crown_windsor
				 new_artifact = {
					 set_name = crown_windsor_name
				 }
			 }
			 if = {
				 limit = {
					 is_female = yes
					 has_dlc = "Holy Fury"
				 }
				 create_bloodline = {
					 type = glorian_queen
				 }
				 new_bloodline = {
					 set_description = "bloodline_desc_glorian"
				 }
			 }
			 if = {
				 limit = {
					 is_female = no
					 has_dlc = "Holy Fury"
				 }
				 create_bloodline = {
					 type = glorian_king
				 }
				 new_bloodline = {
					 set_description = "bloodline_desc_glorian"
				 }
			 }
	}
}

# Informed about Restoration of the Empire of the United Kingdom
narrative_event = {
	id = britain.101
	title = EVTNAMEbritain.101
	desc = EVTDESCbritain.101
	picture = GFX_uk_restored
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAbritain.101
		trigger = {
			NOT = { has_landed_title = e_europa }
		}
	}
	option = {
		name = EVTOPTBbritain.101
		trigger = {
			has_landed_title = e_europa
		}
		prestige = -500
	}
}

narrative_event = {
	id = britain.102
	title = EVTNAMEbritain.102
	desc = EVTDESCbritain.102
	picture = GFX_uk_restored
	
	only_playable = yes
	has_global_flag = uk_restored
	
	trigger = {
		has_landed_title = e_united_kingdom
		NOT = { trait = fount_of_honour }
	}
	
	is_triggered_only = yes
	
	
	option = {
		name = EVTOPTAbritain.45
		add_trait = fount_of_honour
	}
}

# Fount of Honour Trait Lost
character_event = {
	id = britain.103
	desc = EVTDESCbritain.103
	picture = GFX_uk_restored
	
	has_global_flag = uk_restored
		
	trigger = {
		trait = fount_of_honour
		NOT = { has_landed_title = e_united_kingdom }
		is_alive = yes
	}
	
	is_triggered_only = yes
	
	option = {
		name = EVTOPTAbritain.46
		remove_trait = fount_of_honour
	}
}

#On_death Fount of Honour Trait inheritance
character_event = {
	id = britain.104
	hide_window = yes
	
	only_playable = yes
	has_global_flag = uk_restored
	
	trigger = {
		has_landed_title = e_united_kingdom
	}
	
	is_triggered_only = yes
	
	
	immediate = {
		e_united_kingdom = { current_heir = { narrative_event = { id = britain.102 days = 2 } } }
	}
}

#On_title_usurped Sultan Khan Trait inheritance
character_event = {
	id = britain.105
	hide_window = yes
	
	only_playable = yes
	has_global_flag = uk_restored
	
	trigger = {
		FROM = { title = e_united_kingdom }
		NOT = { trait = fount_of_honour }
	}
	
	is_triggered_only = yes
	
	
	immediate = {
		ROOT = { character_event = { id = britain.102 days = 2 } }
	}
}
