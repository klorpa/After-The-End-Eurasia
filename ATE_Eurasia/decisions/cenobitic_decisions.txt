targeted_decisions = {
	cenobitic_order_to_take_vows = {
		only_playable = yes
		filter = court
		ai_target_filter = court
		ai_check_interval = 120 #Check every 120 months
		
		from_potential = {
			is_playable = yes
			has_regent = no
			prisoner = no
			is_adult = yes
			OR = {
					religion = miaphysite
					religion = insular
					#religion = insular_heresy
			}
		}
		
		potential = {
			is_adult = yes
			is_ruler = no
			religion = FROM
			NOT = { has_character_flag = ordainedinthechurch }
			NOR = {  
				trait = monk
				trait = nun
				trait = canon
				trait = canoness
				trait = regularis
				trait = regulara
				trait = desert_father
				trait = desert_mother
				trait = incapable				
				trait = seducer
				trait = seductress
				trait = hedonist
				trait = excommunicated
			}
			host = { character = FROM }
		}		

		allow = {
			FROM = { piety = 100 }
		}

		effect = {
			FROM = { piety = -50 }
			add_cenobitic_trait_effect = yes
			set_character_flag = ordainedinthechurch
			#Once socities for Apostolics and Insulars are added comment this out
			#if = {
				#limit = { 
					#is_in_society = no
					#OR = {
						#religion = miaphysite
					#}
				#}
				#custom_tooltip = { text = cenobitic_tooltip_vows_monk_joins_society }
				#hidden_tooltip = { 
					#join_society = monastic_order_miaphysite
				#}
			#}
			#if = {
				#limit = { 
					#is_in_society = no
					#OR = {
						#religion = insular
						#AND = {
							#is_heretic = no
							#religion = insular_heresy
						#}
					#}
				#}
				#custom_tooltip = { text = cenobitic_tooltip_vows_monk_joins_society }
				#hidden_tooltip = { 
					#join_society = monastic_order_insular
				#}
			#}
			}
	
		ai_will_do = {
			factor = 1
			modifier = { #Like him too much not to do it.
				factor = 20
				reverse_opinion = {
					who = FROM
					value = 50
				}
			}
			modifier = { #I'm a great ruler and he is a dynastic heir.
				factor = 5
				is_child_of = FROM
				dynasty = FROM
				FROM = { is_benevolent_trigger = yes }
				reverse_opinion = {
					who = FROM
					value = 0
				}
			}
			modifier = { #The more sons the merrier.
				factor = 5
				is_child_of = FROM
				NOT = { dynasty = FROM }
			}
			modifier = { #I love you.
				factor = 5
				is_child_of = FROM
				is_friend = FROM
			}
		}
	}
	
	#Disabled miaphysites and insulars from vanilla order to take the vows decision
	order_to_take_vows = {
		only_playable = yes
		filter = court
		ai_target_filter = court
		ai_check_interval = 120 #Check every 120 months
		
		from_potential = {
			is_playable = yes
			has_regent = no
			prisoner = no
			is_adult = yes
			has_dlc = "Sons of Abraham"
			OR = {
				AND = { 
					religion_group = christian
					is_alternate_start = no
				}
				AND = { 
					religion = hindu
					is_alternate_start = no
				}
				AND = { 
					religion = buddhist
					is_alternate_start = no
				}
				AND = { 
					religion = jain
					is_alternate_start = no
				}
				AND = { 
					religion = manichean
					is_alternate_start = no
				}
				has_religion_feature = religion_monastic
				has_religion_feature = religion_feature_west_african
				NOR = { 
					religion = miaphysite
					religion = insular
					#religion = insular_heresy
				}
			}
		}
		
		potential = {
			is_adult = yes
			is_ruler = no
			religion = FROM
			NOR = { 
				trait = incapable 
				trait = monk
				trait = nun
				trait = muni
				trait = aryika
				trait = bhikkhu
				trait = bhikkhuni
				trait = sanyasi
				trait = sanyasini
			}
			host = { character = FROM }
		}
		
		allow = {
			OR = { 
				AND = { 
					is_married = no
					custom_tooltip = {
						text = NOT_HEIR_TITLE_TT
						NOT = {
                        	any_heir_title = { 
                            	always = yes
                            }
                        }
                    }
				}
				prisoner = yes
				conditional_tooltip = {
					trigger = { dynasty = FROM }
					custom_tooltip = { #Matilde's Bloodline
						text = BLOODLINE_EASIER_VOWS_TOOLTIP
						AND = { 
							FROM = { 
								dynasty = ROOT
								any_owned_bloodline = {
									has_bloodline_flag = bloodline_easy_monks
									bloodline_is_active_for = PREV
								}
							}
							ROOT = { 
								any_owned_bloodline = {
									has_bloodline_flag = bloodline_easy_monks
									bloodline_is_active_for = PREV
								}
							}
						}
					}
				}
			}
			FROM = { piety = 50 }
		}

		effect = {
			FROM = { piety = -50 }
			add_ascetic_trait_effect = yes #Adds religion-based monk-traits.
			if = { #For pagans and Altstart
				limit = { 
					NOR = { 
						religion_group = christian 
						religion = hindu
						religion = buddhist
						religion = jain
					} 
					is_female = no
				}
				add_trait = monk
			}
			if = {
				limit = { 
					NOR = { 
						religion_group = christian 
						religion = hindu
						religion = buddhist
						religion = jain
					} 
					is_female = yes
				}
				add_trait = nun
			}
			if = {
				limit = { prisoner = yes }
				prisoner = no
			}
			if = {
				limit = { is_married = yes }
				any_spouse = { remove_spouse = ROOT }
			}
			if = { #Make them actually become monks/nuns if you have Societies.
				limit = { 
					has_dlc = "Mystics"	
					is_in_society = no		
					OR = {
						religion = catholic
						AND = {
							is_heretic = no
							OR = {
								religion = fraticelli
								religion = waldensian
								religion = lollard
								religion = cathar
							}
						}
					} 
				}
				custom_tooltip = { text = tooltip_vows_monk_joins_society }
				hidden_tooltip = { 
					random_list = { 
						50 = { 
							trigger = { religion = catholic } 
							join_society = monastic_order_benedictine 
						} 
						50 = { join_society = monastic_order_dominican } 
					}
				}
			}
			if = {
				limit = { 
					has_dlc = "Mystics" 
					is_in_society = no
					OR = {
						religion = orthodox
						AND = {
							is_heretic = no
							OR = {
								religion = bogomilist
								religion = monothelite
								religion = iconoclast
								religion = paulician
							}
						}
					}
				}
				custom_tooltip = { text = tooltip_vows_monk_joins_society }
				hidden_tooltip = { 
					join_society = monastic_order_orthodox
				}
			}
			if = {
				limit = { 
					has_dlc = "Mystics" 
					is_in_society = no
					OR = {
						religion = nestorian
						AND = {
							is_heretic = no
							religion = messalian
						}
					}
				}
				custom_tooltip = { text = tooltip_vows_monk_joins_society }
				hidden_tooltip = { 
					join_society = monastic_order_nestorian
				}
			}
			if = {
				limit = { 
					has_dlc = "Mystics" 
					is_in_society = no
					religion = hindu 
				}
				custom_tooltip = { text = tooltip_vows_monk_joins_society }
				hidden_tooltip = { 
					join_society = monastic_order_hindu
				}
			}
			if = {
				limit = { 
					has_dlc = "Mystics" 
					is_in_society = no
					religion = buddhist 
				}
				custom_tooltip = { text = tooltip_vows_monk_joins_society }
				hidden_tooltip = { 
					join_society = monastic_order_buddhist
				}
			}
			if = {
				limit = { 
					has_dlc = "Mystics" 
					is_in_society = no
					religion = jain
				}
				custom_tooltip = { text = tooltip_vows_monk_joins_society }
				hidden_tooltip = { 
					join_society = monastic_order_jain
				}
			}
			if = {
				limit = { 
					any_realm_lord = { is_theocracy = yes religion = ROOT }
				}
				custom_tooltip = { text = tooltip_vows_monk_goes_to_theocracy }
				hidden_tooltip = { 
					random_realm_lord = { 
						limit = { is_theocracy = yes religion = ROOT }
						preferred_limit = { 
							reverse_opinion = { who = FROM value = 20 }
							vassal_of = FROM
							same_society_as = ROOT #The one he just joined.
						} 
						preferred_limit = { 
							vassal_of = FROM
							same_society_as = ROOT #The one he just joined.
						} 
						preferred_limit = { 
							same_society_as = ROOT #The one he just joined.
						} 
						preferred_limit = { 
							vassal_of = FROM
						} 
						ROOT = { 
							move_character = PREV
						} 
					}
				}
			}
			if = {
				limit = { NOR = { trait = zealous dynasty = FROM } }
				opinion = { modifier = opinion_cloistered_me who = FROM years = 20 }
			}
			if = {
				limit = { NOT = { trait = zealous } dynasty = FROM }
				opinion = { modifier = opinion_cloistered_me_family who = FROM years = 20 }
			}
			if = {
				limit = { is_child_of = FROM }
				hidden_tooltip = { FROM = { character_event = { id = HFP.23001 } } }
			}
			
		}
		
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = { #Hate you too much to just send you off.
				factor = 0
				prisoner = yes
				NOT = { is_child_of = FROM }
				FROM = { is_benevolent_trigger = no }
				NOT = {
					reverse_opinion = {
						who = FROM
						value = -20
					}
				}
			}
			modifier = { #Like him too much to do it.
				factor = 0
				reverse_opinion = {
					who = FROM
					value = 50
				}
			}
			modifier = { #I'm a good ruler and he is a dynastic heir.
				factor = 0
				is_child_of = FROM
				dynasty = FROM
				FROM = { is_benevolent_trigger = yes }
				reverse_opinion = {
					who = FROM
					value = 0
				}
			}
			modifier = { #Must protect the line.
				factor = 5
				is_child_of = FROM
				NOT = { dynasty = FROM }
			}
			modifier = { #Hate you.
				factor = 5
				is_child_of = FROM
				is_rival = FROM
			}
			modifier = { #There are better spares.
				factor = 20
				is_child_of = FROM
				OR = { 
					has_negative_congenital_trigger = yes
					has_infertile_trait_trigger = yes
					has_severe_disability_trigger = yes
				}
				FROM = { 
					any_child = { 
						is_alive = yes
						NOR = { 
							character = ROOT 
							has_negative_congenital_trigger = yes
							has_infertile_trait_trigger = yes
							has_severe_disability_trigger = yes
						}
					}
				}
			}
			modifier = { #Must preserve the realm from falling to evil.
				factor = 5
				is_evil_trigger = yes
				FROM = { 
					is_benevolent_trigger = yes 
					any_child = { 
						is_alive = yes
						NOR = { 
							character = ROOT 
							is_evil_trigger = yes
						}
					}
				}
			}
		}
	}	
} 	

decisions = {
	change_apostolic_branch = {
		ai = no
		
		potential = {
			religion = miaphysite
			age = 16
			is_playable = yes
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
			NOT = { has_character_flag = changedapostolicbranch }
		}
		
		allow = {
			religion = miaphysite
			is_playable = yes
			NOT = { has_character_flag = changedapostolicbranch }
		}
		
		effect = {
			hidden_tooltip = {
				character_event = { id = cenobitic.002 }
			}
			custom_tooltip = { text = TXT_change_apostolic_branch }
			set_character_flag = changedapostolicbranch
		}
		
		revoke_allowed = {
			always = no
		}
	}

	become_ordained_married = {
		ai_check_interval = 24
		potential = {
			is_adult = yes
			is_married = yes
			OR = {
				religion = miaphysite
				religion = insular
				#religion = insular_heresy
			}
			NOT = { has_character_flag = ordainedinthechurch }
		}
		allow = {
			is_ill = no
			is_pregnant = no
			prisoner = no
			piety = 500
			NOR = {
				is_incapable = yes
				trait = schemer
				trait = seducer
				trait = seductress
				trait = hedonist
				trait = excommunicated
				trait = bad_priest_christian
				trait = proud
				trait = cynical
				has_character_flag = ordainedinthechurch
			}
		}
		effect = {
			change_learning = 1
			add_piety = 100
			add_cenobitic_trait_effect = yes
			set_character_flag = ordainedinthechurch
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 1
				trait = detached_priest
			}
			modifier = {
				factor = 2
				trait = martial_cleric
			}
			modifier = {
				factor = 4
				trait = scholarly_theologian
			}
			modifier = {
				factor = 6
				trait = mastermind_theologian
			}
			modifier = {
				factor = 3
				trait = zealous
			}
			modifier = {
				factor = 3
				trait = devout
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 15
				has_character_modifier = voice_of_jesus
			}
			modifier = {
				factor = 10
				trait = theologian	
			}
			modifier = {
				factor = -1
				trait = proud
			}
			modifier = {
				factor = -1
				trait = slothful
			}
			modifier = {
				factor = -1
				trait = lustful
			}
		}
	}
	
	become_ordained_unmarried = {
		ai_check_interval = 24
		potential = {
			is_adult = yes
			is_married = no
			OR = {
				religion = miaphysite
				religion = insular
				#religion = insular_heresy
			}
			NOT = { has_character_flag = ordainedinthechurch }
		}
		allow = {
			is_ill = no
			is_pregnant = no
			prisoner = no
			piety = 500
			NOR = {
				is_incapable = yes
				trait = schemer
				trait = seducer
				trait = seductress
				trait = hedonist
				trait = excommunicated
				trait = bad_priest_christian
				trait = proud
				trait = cynical
				has_character_flag = ordainedinthechurch
			}
		}
		effect = {
			change_learning = 1
			add_piety = 100
			add_cenobitic_trait_effect = yes
			set_character_flag = ordainedinthechurch
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 1
				trait = detached_priest
			}
			modifier = {
				factor = 2
				trait = martial_cleric
			}
			modifier = {
				factor = 4
				trait = scholarly_theologian
			}
			modifier = {
				factor = 6
				trait = mastermind_theologian
			}
			modifier = {
				factor = 3
				trait = zealous
			}
			modifier = {
				factor = 3
				trait = devout
			}
			modifier = {
				factor = 2
				trait = humble
			}
			modifier = {
				factor = 15
				has_character_modifier = voice_of_jesus
			}
			modifier = {
				factor = 10
				trait = theologian	
			}
			modifier = {
				factor = -1
				trait = proud
			}
			modifier = {
				factor = -1
				trait = slothful
			}
			modifier = {
				factor = -1
				trait = lustful
			}
		}
	}		
}