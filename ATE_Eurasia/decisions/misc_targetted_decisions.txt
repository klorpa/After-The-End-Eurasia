targetted_decisions = {
	reconquista_beneficiary_self = {
		only_playable = yes
		filter = self
		ai_target_filter = self
		show_third_party_potential = no
		third_party_filter = dynasty

		ai_check_interval = 36

		third_party_potential = {
			FROMFROM = {
				is_alive = yes
				is_adult = yes
				is_landed = no
				is_patrician = no
				holy_order = no
				is_feudal = yes
				OR = {
					religion = jacobin
					religion = sun_king_cultist
				}
				NOT = {
					trait = bastard
				}
				NOR = {
					government = theocracy_government
					government = order_government
				}
				OR = {
					is_female = no
					AND = {
						is_female = yes
						is_married_matrilineally = yes
					}
					AND = {
						is_female = yes
						is_married = no
					}
				}
				NOT = {
					has_character_flag = reconquista_beneficiary_flag
				}
				NOT = {
					has_global_flag = reconquista_finished
				}
			}
		}

		potential = {
			has_character_flag = currently_reconquering_mexico
			always = no # Disabled
		}

		allow = {
			any_dynasty_member = {
				is_alive = yes
				is_adult = yes
				is_landed = no
				is_patrician = no
				holy_order = no
				is_feudal = yes
				OR = {
					religion = jacobin
					religion = sun_king_cultist
				}
				NOT = {
					trait = bastard
				}
				NOR = {
					government = theocracy_government
					government = order_government
				}
				OR = {
					is_female = no
					AND = {
						is_female = yes
						is_married_matrilineally = yes
					}
					AND = {
						is_female = yes
						is_married = no
					}
				}
			}
		}

		effect = {
			if = {
				limit = {
					any_dynasty_member = {
						has_character_flag = reconquista_beneficiary_flag
					}
				}
				custom_tooltip = {
					text = remove_previous_reconquista_beneficiary

					event_target:reconquista_beneficiary_target = {
						clr_character_flag = reconquista_beneficiary_flag
					}
				}
			}
			hidden_tooltip = {
				any_dynasty_member_even_if_dead = {
					clr_character_flag = reconquista_beneficiary_flag
				}
			}
			FROMFROM = {
				show_scope_change = no
				set_character_flag = reconquista_beneficiary_flag
				ROOT = {
					save_persistent_event_target = {
						name = reconquista_beneficiary_target
						scope = PREV
					}
				}
				custom_tooltip = { text = new_reconquista_beneficiary_self }
			}
		}
	}

	reconquista_beneficiary_other = {
		only_playable = yes
		filter = dynasty
		ai_target_filter = dynasty

		ai_check_interval = 36

		potential = {
			NOT = {
				has_character_flag = reconquista_beneficiary_flag
			}
			always = no # Disabled
		}

		from_potential = {
			has_character_flag = currently_reconquering_mexico
		}

		allow = {
			is_alive = yes
			is_adult = yes
			is_landed = no
			is_patrician = no
			holy_order = no
			is_feudal = yes
			OR = {
				religion = jacobin
				religion = sun_king_cultist
			}
			NOT = {
				trait = bastard
			}
			NOR = {
				government = theocracy_government
				government = order_government
			}
			OR = {
				is_female = no
				AND = {
					is_female = yes
					is_married_matrilineally = yes
				}
				AND = {
					is_female = yes
					is_married = no
				}
			}
		}

		effect = {
			FROM ={
				show_scope_change = no
				if = {
					limit = {
						any_dynasty_member = {
							has_character_flag = reconquista_beneficiary_flag
						}
					}
					custom_tooltip = {
						text = remove_previous_reconquista_beneficiary

						event_target:reconquista_beneficiary_target = {
							clr_character_flag = reconquista_beneficiary_flag
						}
					}
				}
				hidden_tooltip = {
					any_dynasty_member_even_if_dead = {
						clr_character_flag = reconquista_beneficiary_flag
					}
				}
			}
			set_character_flag = reconquista_beneficiary_flag
			FROM = {
				save_persistent_event_target = {
					name = reconquista_beneficiary_target
					scope = ROOT
				}
			}
		}
	}

	remove_reconquista_beneficiary_self = {
		only_playable = yes
		filter = self
		ai = no

		potential = {
			has_character_flag = currently_reconquering_mexico

			any_dynasty_member = {
				has_character_flag = reconquista_beneficiary_flag
			}
		}

		effect = {
			if = {
				limit = {
					any_dynasty_member = {
						has_character_flag = reconquista_beneficiary_flag
					}
				}
				custom_tooltip = {
					text = remove_previous_reconquista_beneficiary

					event_target:reconquista_beneficiary_target = {
						clr_character_flag = reconquista_beneficiary_flag
					}
				}
			}
			hidden_tooltip = {
				any_dynasty_member_even_if_dead = {
					clr_character_flag = reconquista_beneficiary_flag
				}
			}
		}
	}

	remove_reconquista_beneficiary_other = {
		only_playable = yes
		filter = dynasty
		ai = no

		from_potential = {
			has_character_flag = currently_reconquering_mexico
		}

		potential = {
			has_character_flag = reconquista_beneficiary_flag
		}

		effect = {
			FROM = {
				hidden_tooltip = {
					any_dynasty_member_even_if_dead = {
						clr_character_flag = reconquista_beneficiary_flag
					}
				}
			}
		}
	}

	promise_to_join_reconquista = {
		only_playable = yes
		filter = independent_rulers
		ai_target_filter = independent_rulers

		ai_check_interval = 60

		from_potential = {
			NOT = {
				has_character_flag = promised_reconquista_ally
			}
			culture_group = french
			religion = ROOT
			OR = {
				religion = jacobin
				religion = sun_king_cultist
			}
			mercenary = no
			holy_order = no
			OR = {
				ai = no
				ai_zeal = 5
				trait = zealous
				trait = ambitious
			}
		}

		potential = {
			has_character_flag = currently_reconquering_mexico
			not_reconquista_check_trigger = yes
		}

		allow = {
			FROM = {
				independent = yes
				is_adult = yes
				NOT = {
					war_with = ROOT
				}
				prisoner = no
			}
		}

		effect = {
			FROM = {
				sound_effect = click_pledge_troops_03
				custom_tooltip = { text = reconquest_decision_tt }
				set_character_flag = promised_reconquista_ally
				character_event = { id = HF.49211 }
			}
		}
	}

	christian_mercenary_against_reconquista_mercenary_side = {
		only_playable = yes
		filter = independent_rulers
		ai_target_filter = independent_rulers

		ai_check_interval = 48

		from_potential = {
			culture_group = french
			OR = {
				religion = jacobin
				religion = sun_king_cultist
			}
			war = no
			NOT = {
				any_war = {
					OR = {
						using_cb = reconquest_france
						using_cb = reconquest_provence
						using_cb = reconquest_brittany
						using_cb = reconquest_balc
						using_cb = reconquest_occitania
					}
				}
			}
			independent = yes
			mercenary = no
			holy_order = no
			higher_real_tier_than = BARON
			any_realm_province = {
				region = custom_old_france
			}
			OR = {
				ai = no
				AND = {
					ai = yes
					NOR = {
						trait = zealous
						trait = holy_warrior
						has_crusade_trait_trigger = yes
						ai_zeal = 5
					}
					OR = {
						trait = envious
						trait = greedy
						trait = cynical
						trait = deceitful
					}
				}
			}
		}

		potential = {
			NOR = {
				religion = sun_king_cultist
				religion = jacobin
			}
			any_war = {
				OR = {
					using_cb = reconquest_france
					using_cb = reconquest_provence
					using_cb = reconquest_brittany
					using_cb = reconquest_balc
					using_cb = reconquest_occitania
				}
				defender = {
					character = ROOT
				}
			}
		}

		allow = {
			FROM = {
				prisoner = no
			}

			conditional_tooltip = {
				trigger = {
					FROM = {
						real_tier = COUNT
					}
				}

				ROOT = {
					scaled_wealth = 0.25
				}
			}

			conditional_tooltip = {
				trigger = {
					FROM = {
						real_tier = DUKE
					}
				}

				ROOT = {
					scaled_wealth = 0.5
				}
			}

			conditional_tooltip = {
				trigger = {
					FROM = {
						real_tier = KING
					}
				}

				ROOT = {
					scaled_wealth = 0.75
				}
			}

			conditional_tooltip = {
				trigger = {
					FROM = {
						real_tier = EMPEROR
					}
				}

				ROOT = {
					scaled_wealth = 1
				}
			}

			conditional_tooltip = {
				trigger = {
					FROM = {
						has_character_modifier = reconquista_mercenary_cooldown
					}
				}

				custom_tooltip = {
					text = reconquista_mercenary_cooldown_TT

					always = no
				}
			}
		}

		effect = {
			hidden_tooltip = {
				FROM = {
					add_character_modifier = {
						name = reconquista_mercenary_cooldown
						hidden = yes
						years = 1
					}
				}
			}

			FROM = {
				show_scope_change = no

				if = {
					limit = {
						trait = zealous
					}
					remove_trait = zealous
				}
				piety = -100
				if = {
					limit = {
						trait = content
					}
					remove_trait = content
				}
				else_if = {
					limit = {
						NOT = {
							trait = ambitious
						}
					}
					add_trait = ambitious
				}
			}
			letter_event = { id = HF.49230 days = 3 }
		}
	}

	christian_mercenary_against_reconquista_defender_side = {
		only_playable = yes
		filter = independent_rulers
		ai_target_filter = independent_rulers

		ai_check_interval = 48

		from_potential = {
			NOR = {
				religion = sun_king_cultist
				religion = jacobin
			}
			any_war = {
				OR = {
					using_cb = reconquest_france
					using_cb = reconquest_provence
					using_cb = reconquest_brittany
					using_cb = reconquest_balc
					using_cb = reconquest_occitania
				}
				any_defender = {
					character = PREVPREV
				}
			}
		}

		potential = {
			culture_group = french
			OR = {
				religion = sun_king_cultist
				religion = jacobin
			}
			war = no
			NOT = {
				any_war = {
					OR = {
						using_cb = reconquest_france
						using_cb = reconquest_provence
						using_cb = reconquest_brittany
						using_cb = reconquest_balc
						using_cb = reconquest_occitania
					}
				}
			}
			higher_real_tier_than = BARON
			mercenary = no
			holy_order = no
			independent = yes
			any_realm_province = {
				region = custom_old_france
			}
			OR = {
				FROM = {
					ai = no
				}
				AND = {
					FROM = {
						ai = yes
					}
					OR = {
						ai = no
						AND = {
							NOR = {
								trait = zealous
								trait = holy_warrior
								has_crusade_trait_trigger = yes
								ai_zeal = 5
							}
							OR = {
								trait = envious
								trait = greedy
								trait = cynical
								trait = deceitful
							}
						}
					}
				}
			}
		}

		allow = {
			#is_adult = yes
			prisoner = no
			NOT = {
				trait = zealous
			}
			conditional_tooltip = {
				trigger = {
					ROOT = {
						real_tier = COUNT
					}
				}

				FROM = {
					scaled_wealth = 0.25
				}
			}

			conditional_tooltip = {
				trigger = {
					ROOT = {
						real_tier = DUKE
					}
				}

				FROM = {
					scaled_wealth = 0.5
				}
			}

			conditional_tooltip = {
				trigger = {
					ROOT = {
						real_tier = KING
					}
				}

				FROM = {
					scaled_wealth = 0.75
				}
			}

			conditional_tooltip = {
				trigger = {
					ROOT = {
						real_tier = EMPEROR
					}
				}

				FROM = {
					scaled_wealth = 1
				}
			}

			conditional_tooltip = {
				trigger = {
					ROOT = {
						has_character_modifier = reconquista_mercenary_other_cooldown
					}
				}

				custom_tooltip = {
					text = reconquista_mercenary_cooldown_other_TT

					always = no
				}
			}
		}

		effect = {
			hidden_tooltip = {
				add_character_modifier = {
					name = reconquista_mercenary_other_cooldown
					hidden = yes
					years = 1
				}
			}

			letter_event = { id = HF.49233 days = 3 }
		}
	}

	muslim_mercenary_for_reconquista_mercenary_side = {
		only_playable = yes
		filter = independent_rulers
		ai_target_filter = independent_rulers

		ai_check_interval = 48

		from_potential = {
			NOR = {
				religion = sun_king_cultist
				religion = jacobin
			}
			war = no
			NOT = {
				any_war = {
					OR = {
						using_cb = reconquest_france
						using_cb = reconquest_provence
						using_cb = reconquest_brittany
						using_cb = reconquest_balc
						using_cb = reconquest_occitania
					}
				}
			}
			independent = yes
			higher_real_tier_than = BARON
			mercenary = no
			holy_order = no
			any_realm_province = {
				region = custom_old_france
			}
			OR = {
				ai = no
				AND = {
					ai = yes
					NOR = {
						trait = zealous
						trait = holy_warrior
						has_crusade_trait_trigger = yes
						ai_zeal = 5
					}
					OR = {
						trait = envious
						trait = greedy
						trait = cynical
						trait = deceitful
					}
				}
			}
		}

		potential = {
			OR = {
				religion = sun_king_cultist
				religion = jacobin
			}

			any_war = {
				OR = {
					using_cb = reconquest_france
					using_cb = reconquest_provence
					using_cb = reconquest_brittany
					using_cb = reconquest_balc
					using_cb = reconquest_occitania
				}
				attacker = {
					character = ROOT
				}
			}
		}

		allow = {
			FROM = {
				is_adult = yes
				prisoner = no
			}

			conditional_tooltip = {
				trigger = {
					FROM = {
						real_tier = COUNT
					}
				}

				ROOT = {
					scaled_wealth = 0.25
				}
			}

			conditional_tooltip = {
				trigger = {
					FROM = {
						real_tier = DUKE
					}
				}

				ROOT = {
					scaled_wealth = 0.5
				}
			}

			conditional_tooltip = {
				trigger = {
					FROM = {
						real_tier = KING
					}
				}

				ROOT = {
					scaled_wealth = 0.75
				}
			}

			conditional_tooltip = {
				trigger = {
					FROM = {
						real_tier = EMPEROR
					}
				}

				ROOT = {
					scaled_wealth = 1
				}
			}

			conditional_tooltip = {
				trigger = {
					FROM = {
						has_character_modifier = reconquista_mercenary_cooldown
					}
				}

				custom_tooltip = {
					text = reconquista_mercenary_cooldown_TT

					always = no
				}
			}
		}

		effect = {
			hidden_tooltip = {
				FROM = {
					add_character_modifier = {
						name = reconquista_mercenary_cooldown
						hidden = yes
						years = 1
					}
				}
			}

			FROM = {
				show_scope_change = no

				if = {
					limit = {
						trait = zealous
					}
					remove_trait = zealous
				}
				piety = -100
				if = {
					limit = {
						trait = content
					}
					remove_trait = content
				}
				else_if = {
					limit = {
						NOT = {
							trait = ambitious
						}
					}
					add_trait = ambitious
				}
			}
			letter_event = { id = HF.49230 days = 3 }
		}
	}

	muslim_mercenary_for_reconquista_attacker_side = {
		only_playable = yes
		filter = independent_rulers
		ai_target_filter = independent_rulers

		ai_check_interval = 48

		from_potential = {
			OR = {
				religion = sun_king_cultist
				religion = jacobin
			}
			any_war = {
				OR = {
					using_cb = reconquest_france
					using_cb = reconquest_provence
					using_cb = reconquest_brittany
					using_cb = reconquest_balc
					using_cb = reconquest_occitania
				}
				any_attacker = {
					character = PREVPREV
				}
			}
		}

		potential = {
			NOT = {
				religion_group = cult_of_saints
			}
			war = no
			NOT = {
				any_war = {
					OR = {
						using_cb = reconquest_france
						using_cb = reconquest_provence
						using_cb = reconquest_brittany
						using_cb = reconquest_balc
						using_cb = reconquest_occitania
					}
				}
			}
			higher_real_tier_than = BARON
			mercenary = no
			holy_order = no
			independent = yes
			any_realm_province = {
				region = custom_old_france
			}
			OR = {
				FROM = {
					ai = no
				}
				AND = {
					FROM = {
						ai = yes
					}
					OR = {
						ai = no
						AND = {
							NOR = {
								trait = zealous
								trait = holy_warrior
								has_crusade_trait_trigger = yes
								ai_zeal = 5
							}
							OR = {
								trait = envious
								trait = greedy
								trait = cynical
								trait = deceitful
							}
						}
					}
				}
			}
		}

		allow = {
			is_adult = yes
			prisoner = no
			NOT = {
				trait = zealous
			}
			conditional_tooltip = {
				trigger = {
					ROOT = {
						real_tier = COUNT
					}
				}

				FROM = {
					scaled_wealth = 0.25
				}
			}

			conditional_tooltip = {
				trigger = {
					ROOT = {
						real_tier = DUKE
					}
				}

				FROM = {
					scaled_wealth = 0.5
				}
			}

			conditional_tooltip = {
				trigger = {
					ROOT = {
						real_tier = KING
					}
				}

				FROM = {
					scaled_wealth = 0.75
				}
			}

			conditional_tooltip = {
				trigger = {
					ROOT = {
						real_tier = EMPEROR
					}
				}

				FROM = {
					scaled_wealth = 1
				}
			}

			conditional_tooltip = {
				trigger = {
					ROOT = {
						has_character_modifier = reconquista_mercenary_other_cooldown
					}
				}

				custom_tooltip = {
					text = reconquista_mercenary_cooldown_other_TT

					always = no
				}
			}
		}

		effect = {
			hidden_tooltip = {
				add_character_modifier = {
					name = reconquista_mercenary_other_cooldown
					hidden = yes
					years = 1
				}
			}

			letter_event = { id = HF.49233 days = 3 }
		}
	}
}